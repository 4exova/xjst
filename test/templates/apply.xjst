template(this.type === 'first') {
  var fn = apply;
  this.color = 'blue';
  local (this.mod = 'bem') {
    return apply(this.type = 'second');
  }
}

template(this.type === 'second' && this.mod === 'bem' && this.color === 'blue') {
  var we = 'are different';
  return 'ok';
}

template(this.type === 'second' && this.mod === 'bem' && this.color === 'red') {
  var we = 'are different 2';
  return 'ok';
}

template(this.type === 'third') {
  this.type = 'fourth';
  return apply();
}

template(this.type === 'fourth') {
  var yeah = 'really';
  return 'ok';
}
